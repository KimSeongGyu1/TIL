# 운영체제와 정보기술의 원리(반효경)

### 3장(컴퓨터 시스템의 동작 원리)

<details>
  <summary> CPU 연산과 I/O 연산 </summary>
  </br>
  <p>입출력 장치와 CPU는 동시 수행이 가능하다</p>
  <p>A 프로그램이 CPU에서 실행되며 동시에 B 프로그램은 정보를 읽는 것이 가능하다</p>
  <p>입출력 장치들은 이를 위해 입출력을 임시로 저장하기 위한 작은 메모리를 가진다. 이를 로컬버퍼라고 부른다</p>
  <p>장치는 인터럽트를 이용해 로컬버퍼로 읽어오는 작업이 끝났는지를 보고한다</p>
</details>
<hr>

<details>
  <summary> 인터럽트의 일반적인 기능 </summary>
  </br>
  <p>운영체제는 커널 내에 인터럽트 처리루틴(인터럽트 핸들러)을 가진다</p>
  <p>인터럽트마다 번호를 정해서 번호에 따라 처리해야 할 코드가 위치한 부분을 가리키고 있는 자료구조를 인터럽트 벡터라 한다</p>
  <p>인터럽트에는 하드웨어 인터럽트와 소프트웨어 인터럽트가 있다</p>
  <p>일반적으로 인터럽트는 하드웨어 인터럽트를 의미한다. 소프트웨어 인터럽트는 주로 트랩이라 불린다</p>
  <p>트랩의 대표적인 예는 exception과 시스템 콜이다</p>
  <p>(exception과 시스템콜이 발생했을 때 CPU 제어권이 프로그램에서 운영체제로 넘어간다)</p>
</details>
<hr>

<details>
  <summary> 인터럽트 핸들링 </summary>
  </br>
  <p>CPU는 내부 임시 기억장치인 레지스터에 데이터를 읽고 쓰며 작업을 하는데, 인터럽트는 이를 지우게 된다. 이를 따로 저장하는 것이 먼저 이루어 져야 한다</p>
  <p>운영체제는 프로세스 제어블록(PCB)라는 자료구조를 이용해 실행되는 프로그램들을 관리한다. PCB는 프로그램마다 하나씩 존재하며 프로그램의 어느 부분이 실행 중이었는지를 저장한다</p>
  <p>인터럽트 발생시 처음에 PCB에 실행 상태를 저장하는 것이 먼저 이루어 진다</p>
</details>
<hr>

<details>
  <summary> 동기식(synchronous) 입출력 </summary>
  </br>
  <p>입출력 요청시 입출력 연산이 끝나는 인터럽트를 기다리며 CPU를 대기시킨다</p>
  <p>CPU 연산은 입출력 연산보다 빠르며 이는 자원의 낭비가 심하다고 볼 수 있다</p>
  <p>일반적으로 입출력이 완료될 때까지 해당 프로그램을 blocked state로 전환시키고 다른 프로그램에게 CPU를 이용하게 한다</p>
  <p>이 때 여러 프로그램이 같은 메모리를 수정할 경우 입출력의 순서를 유지하기 위해(입출력의 동기성을 보장하기 위해) 장치별로 queue를 둔다</p>
</details>
<hr>

<details>
  <summary> 비동기식(asynchronous) 입출력 </summary>
  </br>
  <p>입출력 요청시 끝나기를 기다리지 않고 CPU의 제어권을 해당 프로그램에게 바로 다시 부여한다</p>
  <p>입출력 연산과 무관하게 처리 가능한 작업부터 처리할 수 있다</p>
  <p>입출력이 끝났음을 인터럽트를 이용해 알리며 이 때 발생하는 인터럽트는 하드웨어 인터럽트이다</p>
</details>
<hr>

<details>
  <summary> DMA </summary>
  </br>
  <p>원칙적으로 메모리는 CPU만 접근 가능하며, 그 외의 장치는 인터럽트로 CPU에게 접근을 대행하게 하는 방식으로만 간접적으로 접근 가능</p>
  <p>그러나 모든 메모리 접근 연산이 CPU를 통할 경우 CPU 사용의 효율성이 떨어진다</p>
  <p>이를 개선하기 위해 메모리 접근이 가능한 장치를 하나 더 두는 경우가 많으며, 이를 DMA(Direct Memory Access)라 한다</p>
  <p>DMA는 인터럽트의 빈도를 줄여 CPU를 효율적으로 이용하게 해준다</p>
  <p>DMA는 byte단위가 아니라 block 단위로 메모리를 읽는다</p>
</details>
<hr>

<details>
  <summary> 저장장치 </summary>
  </br>
  <p>주기억장치와 보조기억장치로 나뉜다</p>
  <p>보조기억장치의 용도는 파일시스템용과 스왑영역용으로 구분된다</p>
  <p>빠른 저장장치부터 느린 저장장치까지 단계적인 계층구조로 이루어진다</p>
  <p>주 기억 장치에서는 레지스터, 캐시 메모리, 메인 메모리 순으로 빠르다</p>
</details>
<hr>

<details>
  <summary> 하드웨어 보안 </summary>
  </br>
  <p>여러 프로그램이 동시에 실행될 때 프로그램간의 충돌을 막기 위한 보안이 필요하다</p>
  <p>운영체제는 기본적으로 커널모드와 사용자모드를 지원한다</p>
  <p>중요한 정보에 접근해 위험한 상황을 초래할 수 있는 연산은 커널모드에서만 실행한다</p>
  <p>컴퓨터 시스템은 CPU 내부에 mode bit를 두어 사용자 프로그램을 감시한다</p>
</details>
<hr>

<details>
  <summary> 메모리 보안 </summary>
  </br>
  <p>디스크뿐 아니라 메모리도 보안이 필요하다</p>
  <p>인터럽트 벡터와 인터럽트 처리 루틴이 있는 곳은 특히 중요하다</p>
  <p>base register와 limit register를 이용해 접근하는 메모리가 합법한지 체크한다</p>
  <p>base register는 프로그램이 접근할 수 있는 메모리의 가장 작은 값, limit register는 접근할 수 있는 메모리의 범위 크기를 나타낸다</p>
  <p>단 이는 하나의 프로그램이 연속적인 메모리만 차지하는 단순한 기법에 한정된다. 다른 기법들에 대한 것은 7장에서 다룬다</p>
</details>
<hr>

<details>
  <summary> CPU 보호 </summary>
  </br>
  <p>특정 프로그램이 CPU를 독점해 무한루프를 수행하면 다른 프로그램, 운영체제가 CPU 제어권을 가질 수 없다</p>
  <p>운영체제는 타이머라는 하드웨어를 사용해 정해진 시간이 지나면 인터럽트를 발생시켜 CPU의 제어권을 빼앗을 수 있게 한다</p>
  <p>타이머는 시분할 시스템에서도 사용된다</p>
</details>
<hr>